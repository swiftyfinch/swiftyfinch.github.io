<!DOCTYPE html><html lang="ru"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Swifty Finch"/><link rel="canonical" href="https://swiftyfinch.github.io/ru/2020-07-18-drop-last"/><meta name="twitter:url" content="https://swiftyfinch.github.io/ru/2020-07-18-drop-last"/><meta name="og:url" content="https://swiftyfinch.github.io/ru/2020-07-18-drop-last"/><title>–£—Å–∫–æ—Ä—è–µ–º .dropLast() üêå | Swifty Finch</title><meta name="twitter:title" content="–£—Å–∫–æ—Ä—è–µ–º .dropLast() üêå | Swifty Finch"/><meta name="og:title" content="–£—Å–∫–æ—Ä—è–µ–º .dropLast() üêå | Swifty Finch"/><meta name="description" content="–ù–µ–¥–∞–≤–Ω–æ —è —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞. –°–Ω–∞—á–∞–ª–∞ –≤–∑—è–ª –≥–æ—Ç–æ–≤—ã–π –ø–∞—Ä—Å–µ—Ä Xcode –ª–æ–≥–æ–≤, –∑–∞—Ç–µ–º –Ω–∞–ø–∏—Å–∞–ª —Å–≤–æ–π. –í –∏—Ç–æ–≥–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å–∫–æ—Ä–∏–ª–æ—Å—å –Ω–∞ 95%. –ê –≤ —ç—Ç–æ–º –ø–æ—Å—Ç–µ –æ–ø–∏—à—É –ø–æ–¥—Ö–æ–¥ –∫ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–æ–¥–∞ –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –º–µ—Ç–æ–¥–∞ .dropLast()."/><meta name="twitter:description" content="–ù–µ–¥–∞–≤–Ω–æ —è —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞. –°–Ω–∞—á–∞–ª–∞ –≤–∑—è–ª –≥–æ—Ç–æ–≤—ã–π –ø–∞—Ä—Å–µ—Ä Xcode –ª–æ–≥–æ–≤, –∑–∞—Ç–µ–º –Ω–∞–ø–∏—Å–∞–ª —Å–≤–æ–π. –í –∏—Ç–æ–≥–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å–∫–æ—Ä–∏–ª–æ—Å—å –Ω–∞ 95%. –ê –≤ —ç—Ç–æ–º –ø–æ—Å—Ç–µ –æ–ø–∏—à—É –ø–æ–¥—Ö–æ–¥ –∫ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–æ–¥–∞ –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –º–µ—Ç–æ–¥–∞ .dropLast()."/><meta name="og:description" content="–ù–µ–¥–∞–≤–Ω–æ —è —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞. –°–Ω–∞—á–∞–ª–∞ –≤–∑—è–ª –≥–æ—Ç–æ–≤—ã–π –ø–∞—Ä—Å–µ—Ä Xcode –ª–æ–≥–æ–≤, –∑–∞—Ç–µ–º –Ω–∞–ø–∏—Å–∞–ª —Å–≤–æ–π. –í –∏—Ç–æ–≥–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å–∫–æ—Ä–∏–ª–æ—Å—å –Ω–∞ 95%. –ê –≤ —ç—Ç–æ–º –ø–æ—Å—Ç–µ –æ–ø–∏—à—É –ø–æ–¥—Ö–æ–¥ –∫ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–æ–¥–∞ –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –º–µ—Ç–æ–¥–∞ .dropLast()."/><!--Yandex.Metrika counter--><script type="text/javascript">(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

ym(62530267, "init", {
     clickmap:true,
     trackLinks:true,
     accurateTrackBounce:true
});</script><noscript><div><img src="https://mc.yandex.ru/watch/62530267" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!--/Yandex.Metrika counter--><meta name="yandex-verification" content="57c929529030b8fd"/><meta name="google-site-verification" content="u8NFg-rSs0ZM826TWcHCMQ90RRHRjEk9SpRSbYcB1rQ"/><meta name="twitter:card" content="summary_large_image"/><link rel="stylesheet" href="/styles.css" type="text/css"/><link rel="stylesheet" href="/code.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180"/><link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32"/><link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16"/><link rel="manifest" href="/site.webmanifest"/><meta name="twitter:image" content="https://swiftyfinch.github.io/posts/2020-07-18-drop-last/preview.png"/><meta name="og:image" content="https://swiftyfinch.github.io/posts/2020-07-18-drop-last/preview.png"/></head><body class="item-page"><header><div class="wrapper"><div class="facade"><a class="site-name" href="/ru"><img class="avatar" src="/site/avatar.png"/>Swifty Finch</a><div class="icons"><div><a class="icon" href="https://www.instagram.com/swiftyfinch"><img src="/site/networks/instagram_bw.png"/></a></div><div><a class="icon" href="https://twitter.com/swiftyfinch"><img src="/site/networks/twitter_bw.png"/></a></div><div><a class="icon" href="https://medium.com/@swiftyfinch"><img src="/site/networks/medium_bw.png"/></a></div><div><a class="icon" href="https://github.com/swiftyfinch"><img src="/site/networks/github_bw.png"/></a></div><div><a class="icon" href="https://ekaterinburg.hh.ru/applicant/resumes/view?resume=227c8eb0ff013a445d0039ed1f395a436a494a"><img src="/site/networks/hh_bw.png"/></a></div><div><a class="icon" href="https://www.linkedin.com/in/vyacheslav-khorkov-92b65164"><img src="/site/networks/linkedin_bw.png"/></a></div><div><a class="icon" href="https://www.upwork.com/o/profiles/users/_~01379889e9ed58198c"><img src="/site/networks/upwork_bw.png"/></a></div></div><nav><a href="/en"><div>en</div></a></nav><a href="https://ko-fi.com/swiftyfinch" target="_blank"><img src="https://cdn.ko-fi.com/cdn/kofi5.png?v=2" alt="Buy Me a Coffee at ko-fi.com" style="border:0px;height:34px;opacity:0.8;"/></a></div></div></header><div class="wrapper"><article><div class="content"><h1><p>–£—Å–∫–æ—Ä—è–µ–º <strong>.dropLast()</strong> <img class="reaction" src="/reactions/snail.svg" alt="snail" title="snail"></p></h1><div class="tag-list"><a href="/tags/ru-ios"><div style="background-color: #efac32">ios</div></a><a href="/tags/ru-swift"><div style="background-color: #6c99bb">swift</div></a><a href="/tags/ru-algorithms"><div style="background-color: #7daf9c">algorithms</div></a></div><div class="date"><img class="date_icon" src="/reactions/calendar.svg"/><span>18.07.2020</span></div><div class="time_to_read"><img class="time_to_read_icon" src="/reactions/watch.svg"/><span class="time_to_read_text">3 –º–∏–Ω</span></div><p>–ù–µ–¥–∞–≤–Ω–æ —è —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞. –°–Ω–∞—á–∞–ª–∞ –≤–∑—è–ª –≥–æ—Ç–æ–≤—ã–π –ø–∞—Ä—Å–µ—Ä <strong>Xcode</strong> –ª–æ–≥–æ–≤, –∑–∞—Ç–µ–º –Ω–∞–ø–∏—Å–∞–ª —Å–≤–æ–π. –í –∏—Ç–æ–≥–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å–∫–æ—Ä–∏–ª–æ—Å—å –Ω–∞ <strong>95%</strong>. –ê –≤ —ç—Ç–æ–º –ø–æ—Å—Ç–µ –æ–ø–∏—à—É –ø–æ–¥—Ö–æ–¥ –∫ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–æ–¥–∞ –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –º–µ—Ç–æ–¥–∞ <strong>.dropLast()</strong>.</p><h2 id="prepare"><img class="reaction" src="/reactions/cook.svg" alt="cook" title="cook"> <a href="#prepare">–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞</a></h2><p>–î–∞–≤–∞–π—Ç–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∏–º –ø—Ä–∏–º–µ—Ä, –Ω–∞–ø–∏—à–µ–º –º–µ—Ç–æ–¥ <strong>.skip()</strong>. –ï–≥–æ –∑–∞–¥–∞—á–∞ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–∏–º–≤–æ–ª –∏–∑ —Å—Ç—Ä–æ–∫–∏.</p><ol><li>–ë–µ—Ä–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–∏–º–≤–æ–ª –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å;</li><li>–£–¥–∞–ª—è–µ–º –µ–≥–æ —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ <strong>.dropLast()</strong>;</li><li>–í–æ–∑–≤—Ä–∞—â–∞–µ–º —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–∏–º–≤–æ–ª.</li></ol><p>–¢–∞–∫–∂–µ –ø–æ–º–µ—Ç–∏–º —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ <strong>@discardableResult</strong>, —Ç–∞–∫ –∫–∞–∫ —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –Ω–∞–º –Ω–µ –Ω—É–∂–µ–Ω –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–π —Å–∏–º–≤–æ–ª.</p><pre><code><div class="line"><span class="keyword">@discardableResult</span></div><div class="line"><span class="keyword">mutating func</span> skip() -&gt; <span class="type">Character</span>? {</div><div class="line">    <span class="keyword">guard let</span> last = <span class="property">content</span>.<span class="call">last</span> <span class="keyword">else</span> { <span class="keyword">return nil</span> }</div><div class="line">    <span class="property">content</span> = <span class="property">content</span>.<span class="method">dropLast</span>()</div><div class="line">    <span class="keyword">return</span> last</div><div class="line">}</div></code></pre><h2 id="measure"><img class="reaction" src="/reactions/ruler.svg" alt="ruler" title="ruler"> <a href="#measure">–ò–∑–º–µ—Ä—è–µ–º</a></h2><p>–û—Ç–ª–∏—á–Ω–æ, –Ω–æ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º —É –Ω–∞—Å –ø–æ—è–≤–∏–ª–æ—Å—å –ø–æ–¥–æ–∑—Ä–µ–Ω–∏–µ, —á—Ç–æ –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –Ω–∞–º–∏ –º–µ—Ç–æ–¥ –º–µ–¥–ª–µ–Ω–Ω—ã–π. –ö–∞–∫ —ç—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å? –ú–æ–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç —Å –ø–æ–º–æ—â—å—é <strong>measure()</strong>. –î–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã, —è –Ω–µ –±—É–¥—É –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —á–µ—Ä–µ–∑ <strong>XCTAssert</strong>. –ò–Ω–∞—á–µ –ø—Ä–∏–º–µ—Ä –±—É–¥–µ—Ç —Å–ª–æ–∂–Ω–µ–µ.</p><ol><li>–°–æ–∑–¥–∞–µ–º –±–æ–ª—å—à—É—é —Å—Ç—Ä–æ–∫—É <strong>"–∞–∞–∞–∞–∞–∞..."</strong>;</li><li>–°–æ–∑–¥–∞–µ–º <strong>Scanner</strong>, –≥–¥–µ –º—ã –æ–±—ä—è–≤–∏–ª–∏ –º–µ—Ç–æ–¥ <strong>.skip()</strong>;</li><li>–ò—Å–ø–æ–ª—å–∑—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é <strong>measure()</strong> –¥–ª—è –æ—Ü–µ–Ω–∫–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è;</li><li>–ò –Ω–∞–∫–æ–Ω–µ—Ü –≤—ã–∑—ã–≤–∞–µ–º –Ω–∞—à –º–µ—Ç–æ–¥ <strong>.skip()</strong>.</li></ol><pre><code><div class="line"><span class="keyword">func</span> testSkip() {</div><div class="line">    <span class="keyword">let</span> src = <span class="type">String</span>(repeating: <span class="string">"a"</span>, count: <span class="number">10_000_000</span>)</div><div class="line">    <span class="keyword">var</span> scanner = <span class="type">Scanner</span>(src)</div><div class="line">    <span class="method">measure</span> {</div><div class="line">        scanner.<span class="method">skip</span>()</div><div class="line">    }</div><div class="line">}</div></code></pre><p><br> –î–∞–≤–∞–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏–º —ç—Ç–æ—Ç —Ç–µ—Å—Ç.</p><img src="/posts/2020-07-18-drop-last/no_baseline.png"/><p><br> –ò—Ç–∞–∫, —Ç–µ–ø–µ—Ä—å –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã—Å—Ç–∞–≤–∏—Ç—å <strong>baseline</strong>. –≠—Ç–æ –±–∞–∑–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∫–æ—Ç–æ—Ä–æ–≥–æ –º—ã –±—É–¥–µ–º –æ—Ü–µ–Ω–∏–≤–∞—Ç—å —Å—Ç–∞–ª–æ –ª–∏ —Ä–µ—à–µ–Ω–∏–µ –ª—É—á—à–µ –∏–ª–∏ —Ö—É–∂–µ.</p><img src="/posts/2020-07-18-drop-last/set_baseline.png"/><p><br> –ó–∞–ø—É—Å–∫–∞–µ–º –µ—â—ë —Ä–∞–∑ –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ <strong>baseline</strong>.</p><img src="/posts/2020-07-18-drop-last/first_try.png"/><p>–ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ –º–µ–¥–ª–µ–Ω–Ω–æ. –ù–æ –º—ã –ø–æ–ª—É—á–∏–ª–∏ –æ—Ü–µ–Ω–∫—É –º–µ—Ç–æ–¥–∞. –¢–µ–ø–µ—Ä—å –º–æ–∂–µ–º –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —É–ª—É—á—à–∏—Ç—å –µ–≥–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–∑–º–µ–Ω–∏–ª–∞—Å—å –ª–∏ —Å–∫–æ—Ä–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è. –î–∞–≤–∞–π—Ç–µ –ø–æ–ø—Ä–æ–±—É–µ–º.</p><h2 id="blackjack"><img class="reaction" src="/reactions/bender.svg" alt="bender" title="bender"> <a href="#blackjack">–°–≤–æ—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è <strong>.dropLast</strong> —Å –±–ª—ç–∫–¥–∂–µ–∫–æ–º</a></h2><p>–î–æ —ç—Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞ —è –Ω–µ —É–ø–æ–º–∏–Ω–∞–ª, —á—Ç–æ <strong>Scanner</strong> —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ —Å —Ç–∏–ø–æ–º <strong>String</strong>. –ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–æ–ª–µ–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ç–∏–ø <strong>SubString</strong>. –≠—Ç–æ—Ç —Ç–∏–ø –Ω–µ —Å–æ–∑–¥–∞–µ—Ç –∫–æ–ø–∏—é —Å—Ç—Ä–æ–∫–∏.</p><p>–í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã —É–±–∏—Ä–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–∏–º–≤–æ–ª, —Å–æ–∑–¥–∞–¥–∏–º <strong>SubString</strong> —Å –¥–ª–∏–Ω–æ–π –Ω–∞ –æ–¥–∏–Ω —Å–∏–º–≤–æ–ª –º–µ–Ω—å—à–µ. –ù–æ –≤ <strong>Swift</strong> —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏ —Å—Ç—Ä–æ–∫ –≤—Å—ë –Ω–µ —Ç–∞–∫ –ø—Ä–æ—Å—Ç–æ. –°–∏–º–≤–æ–ª—ã –Ω–µ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–ª–∏–Ω–Ω—ã –∏ –ø–æ—ç—Ç–æ–º—É –∏–Ω–¥–µ–∫—Å—ã –Ω–µ —è–≤–ª—è—é—Ç—Å—è —Ü–µ–ª—ã–º–∏ —á–∏—Å–ª–∞–º–∏. –ú—ã –Ω–µ —Å–º–æ–∂–µ–º –Ω–∞–ø–∏—Å–∞—Ç—å —Ç–∞–∫ <strong>content[0..&lt;(content.count - 1)]</strong>.</p><ol><li>–í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –ø–æ–ª—É—á–∏–º –ø–æ—Å–ª–µ–¥–Ω–∏–π –∏–Ω–¥–µ–∫—Å <strong>content.endIndex</strong>;</li><li>–ê –∑–∞—Ç–µ–º —Å–¥–≤–∏–Ω–µ–º –µ–≥–æ —Å –ø–æ–º–æ—â—å—é <strong>content.index(before:)</strong>;</li><li>–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –º—ã —Å–º–æ–∂–µ–º –≤–∑—è—Ç—å —Å—Ç—Ä–æ–∫—É –±–µ–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–∏–º–≤–æ–ª–∞ <strong>content[..&lt;secondLast]</strong>.</li></ol><pre><code><div class="line"><span class="keyword">@discardableResult</span></div><div class="line"><span class="keyword">mutating func</span> skip() -&gt; <span class="type">Character</span>? {</div><div class="line">    <span class="keyword">guard let</span> last = <span class="property">content</span>.<span class="call">last</span> <span class="keyword">else</span> { <span class="keyword">return nil</span> }</div><div class="line">    <span class="keyword">let</span> secondLast = <span class="property">content</span>.<span class="method">index</span>(before: <span class="property">content</span>.<span class="call">endIndex</span>)</div><div class="line">    <span class="property">content</span> = <span class="property">content</span>[..&lt;secondLast]</div><div class="line">    <span class="keyword">return</span> last</div><div class="line">}</div></code></pre><p><br>–ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç –µ—â—ë —Ä–∞–∑.</p><img src="/posts/2020-07-18-drop-last/optimised.png"/><p>–ò–∏–∏–∏ <strong>0.000 sec</strong>, <strong>100% better</strong>! –í–æ—Ç —Ç–∞–∫ —Ç–æ –ª—É—á—à–µ! <img class="reaction" src="/reactions/force.svg" alt="force" title="force"></p><h2 id="why"><img class="reaction" src="/reactions/chto_podelat.svg" alt="chto_podelat" title="chto_podelat"> <a href="#why">–ù–æ –ø–æ—á–µ–º—É —Ç–∞–∫ –≤—ã—à–ª–æ?</a></h2><p>–ß—Ç–æ–±—ã —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è —Å —ç—Ç–∏–º –¥–∞–≤–∞–π—Ç–µ –æ–±—Ä–∞—Ç–∏–º—Å—è –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –º–µ—Ç–æ–¥–∞. –ù–∏–∂–µ —è –ø—Ä–∏–≤–æ–∂—É –ª–∏—à—å —Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π –æ—Ç—Ä—ã–≤–æ–∫.</p><pre><code><div class="line"><span class="comment">/// -</span> Complexity<span class="comment">:</span> <span class="docs">O(<span class="comment"><b>1</b></span>) if the collection conforms to </span><span class="comment">RandomAccessCollection</span>;</div><div class="line"><span class="comment">/// </span><span class="docs">otherwise, O(</span><span class="comment"><b>k</b></span><span class="docs">), where </span><span class="comment"><b>k</b></span><span class="docs"> is the number of elements to drop.</span></div></code></pre><p><strong>String</strong> –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç <strong>RandomAccessCollection</strong>. –ö–∞–∫ —è —É–ø–æ–º–∏–Ω–∞–ª –≤—ã—à–µ, –º—ã –Ω–µ –º–æ–∂–µ–º –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ —Å–∏–º–≤–æ–ª—É –ø–æ —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω–æ–º—É –∏–Ω–¥–µ–∫—Å—É. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –Ω–∞–º –Ω—É–∂–Ω–æ –µ–≥–æ –≤—ã—Å—á–∏—Ç—ã–≤–∞—Ç—å —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–æ–≤ —Å—Ç—Ä–æ–∫–∏. –ù–æ –∫–∞–∫ –Ω–∞–º —É–¥–∞–ª–æ—Å—å –Ω–∞–ø–∏—Å–∞—Ç—å –±—ã—Å—Ç—Ä–µ–µ –∏—Å–ø–æ–ª—å–∑—É—è —Ç–æ–ª—å–∫–æ –∏–Ω–¥–µ–∫—Å—ã?</p><h2 id="std"><img class="reaction" src="/reactions/toolbox.svg" alt="toolbox" title="toolbox"> <a href="#std">Swift STD</a></h2><p>–î–∞–≤–∞–π—Ç–µ –ø–æ–π–¥–µ–º —á—É—Ç—å –¥–∞–ª—å—à–µ –∏ –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –º–µ—Ç–æ–¥–∞ <strong>.dropLast()</strong>. –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ <strong>Swift</strong> –ª–µ–∂–∏—Ç –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –¥–æ—Å—Ç—É–ø–µ –Ω–∞ <strong>GitHub</strong>. –°–∫–∞—á–∞–µ–º –µ—ë –∏ –Ω–∞–π–¥–µ–º –Ω—É–∂–Ω—ã–π –º–µ—Ç–æ–¥ —Å –ø–æ–º–æ—â—å—é <strong>grep</strong>.</p><pre><code class="terminal"><div class="line">swift-master <span class="red-circle">‚Ä¢</span><span class="yellow-circle">‚Ä¢</span><span class="green-circle">‚Ä¢</span> grep --color=always -r "func dropLast(_ k" *</div><div class="line">stdlib/public/core/Collection.swift: <span class="keyword">func dropLast(_ k</span>: Int = 1) -&gt; SubSequence</div><div class="line">stdlib/public/core/Sequence.swift: <span class="keyword">func dropLast(_ k</span>: Int = 1) -&gt; [Element]</div><div class="line">stdlib/public/core/BidirectionalCollection.swift: <span class="keyword">func dropLast(_ k</span>: Int) -&gt; SubSequence</div></code></pre><p>–ü–æ—Ö–æ–∂–µ –Ω—É–∂–Ω—ã–π –Ω–∞–º –º–µ—Ç–æ–¥ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∑–¥–µ—Å—å: <strong>stdlib/public/core/Collection.swift</strong>.</p><pre><code><div class="line"><span class="keyword">@inlinable</span></div><div class="line"><span class="keyword">public __consuming func</span> dropLast(<span class="keyword">_</span> k: <span class="type">Int</span> = <span class="number">1</span>) -&gt; <span class="type">SubSequence</span> {</div><div class="line">    <span class="method">_precondition</span>(k &gt;= <span class="number">0</span>, <span class="string">"Can't drop a negative number of elements"</span>)</div><div class="line">    <span class="keyword">let</span> amount = <span class="type">Swift</span>.<span class="method">max</span>(<span class="number">0</span>, <span class="property">count</span> - k)</div><div class="line">    <span class="keyword">let</span> end = <span class="method">index</span>(<span class="property">startIndex</span>, offsetBy: amount, limitedBy: <span class="property">endIndex</span>) ?? <span class="property">endIndex</span></div><div class="line">    <span class="keyword">return self</span>[startIndex..&lt;end]</div><div class="line">}</div></code></pre><p>–° —Ö–æ–¥—É –Ω–µ –ø–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ —Ç–∞–∫–∏–º –º–µ–¥–ª–µ–Ω–Ω—ã–º. –ù–∞—à–∞ –∏–¥–µ—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–∞ –∏–Ω–¥–µ–∫—Å–∞—Ö –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂–∞.</p><h2 id="find_out"><img class="reaction" src="/reactions/loupe.svg" alt="loupe" title="loupe"> <a href="#find_out">–†–∞–∑–±–∏—Ä–∞–µ–º—Å—è</a></h2><p>–ï—Å–ª–∏ –ø—Ä–∏—Å–º–æ—Ç—Ä–µ—Ç—å—Å—è –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–µ–µ –∏ –≤—Å–ø–æ–º–Ω–∏—Ç—å –æ —á–µ–º —è —É–∂–µ —É–ø–æ–º–∏–Ω–∞–ª –≤ —ç—Ç–æ–º –ø–æ—Å—Ç–µ, —Ç–æ –º–æ–∂–Ω–æ –∑–∞–º–µ—Ç–∏—Ç—å –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ —Å–≤–æ–π—Å—Ç–≤—É <strong>count</strong>. –ï—Å–ª–∏ —Å–∏–º–≤–æ–ª—ã —Å—Ç—Ä–æ–∫ –Ω–µ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞, —Ç–æ –∫–∞–∫ –ø–æ—Å—á–∏—Ç–∞—Ç—å <strong>count</strong>? –î–∞–≤–∞–π—Ç–µ –≤–∑–≥–ª—è–Ω–µ–º –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é.</p><pre><code><div class="line"><span class="comment">///</span> <span class="docs">To check whether a collection is empty, use its <span class="comment">isEmpty</span> property</span></div><div class="line"><span class="comment">///</span> <span class="docs">instead of comparing <span class="comment">count</span> to zero. Unless the collection guarantees</span></div><div class="line"><span class="comment">///</span> <span class="docs">random-access performance, calculating <span class="comment">count</span> can be an O(<span class="comment"><b>n</b>)</span></div><div class="line"><span class="comment">///</span> <span class="docs">operation.</span></div></code></pre><p>–ò–∑ –æ–ø–∏—Å–∞–Ω–∏—è —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —è—Å–Ω–æ, —á—Ç–æ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ —Å–≤–æ–π—Å—Ç–≤—É <strong>count</strong> —É –∫–æ–ª–ª–µ–∫—Ü–∏–π –±–µ–∑ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ —Ä–∞–≤–Ω–æ—Å–∏–ª—å–Ω–æ –ø—Ä–æ—Ö–æ–¥—É –ø–æ –≤—Å–µ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏. –≠—Ç–æ –æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω–æ. –ò –Ω–∞–º —ç—Ç–æ —Å–æ–≤—Å–µ–º –Ω–µ –Ω—É–∂–Ω–æ.</p><p>–¢–æ–ª—å–∫–æ –ø—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ–±—ã —É–¥–∞–ª–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–∏–º–≤–æ–ª –≤ –æ–≥—Ä–æ–º–Ω–æ–º –ª–æ–≥–µ <strong>Xcode</strong> –Ω–∞–º –ø–æ—Ç—Ä–µ–±–æ–≤–∞–ª–æ—Å—å –±—ã –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞–∂–¥—ã–π —Å–∏–º–≤–æ–ª –ª–æ–≥–∞? –ë–µ–∑—É–º–∏–µ! <img class="reaction" src="/reactions/crazy.svg" alt="crazy" title="crazy"></p><p>–ü–æ—ç—Ç–æ–º—É –∏–º–µ–µ—Ç —Å–º—ã—Å–ª —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–≤–æ–µ–≥–æ –º–µ—Ç–æ–¥–∞ <strong>.dropLast()</strong>, –∫–æ–≥–¥–∞ –º—ã –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Å–∏–º–≤–æ–ª. –¢–æ–≥–¥–∞ –Ω–∞–º –Ω–µ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –¥–ª–∏–Ω—É —Å—Ç—Ä–æ–∫–∏ —Å –ø–æ–º–æ—â—å—é <strong>count</strong>. –ò –º—ã –µ—ë —É–∂–µ –Ω–∞–ø–∏—Å–∞–ª–∏. <img class="reaction" src="/reactions/chto_podelat.svg" alt="chto_podelat" title="chto_podelat"></p><h2 id="result"><img class="reaction" src="/reactions/party.svg" alt="party" title="party"> <a href="#result">–†–µ–∑—É–ª—å—Ç–∞—Ç</a></h2><ul><li>–í —ç—Ç–æ–º –ø–æ—Å—Ç–µ –º—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª–∏ –ø—Ä–æ—Å—Ç–æ–π –º–µ—Ç–æ–¥ –¥–ª—è –ø—Ä–æ–ø—É—Å–∫–∞ —Å–∏–º–≤–æ–ª–∞ <strong>.skip()</strong>;</li><li>–†–∞–∑–æ–±—Ä–∞–ª–∏—Å—å –∫–∞–∫ –º–æ–∂–Ω–æ –∏–∑–º–µ—Ä–∏—Ç—å –µ–≥–æ —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã —Å –ø–æ–º–æ—â—å—é <strong>measure()</strong>;</li><li>–ù–µ–º–Ω–æ–≥–æ –ø–æ—á–∏—Ç–∞–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é, –∞ –Ω–µ <strong>Stack Overflow</strong> (–ø–æ–ª–µ–∑–Ω–æ –∏–Ω–æ–≥–¥–∞);</li><li>–ù–∞—à–ª–∏ –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ <strong>Swift</strong> –∏ —Ä–∞–∑–æ–±—Ä–∞–ª–∏—Å—å –≤ –Ω–µ–º (–Ω–æ —ç—Ç–æ –Ω–µ —Ç–æ—á–Ω–æ);</li><li>–ù–∞–ø–∏—Å–∞–ª–∏ —Å–≤–æ–π –ª–µ–≥–∫–∏–π –º–µ—Ç–æ–¥ <strong>.dropLast()</strong> –¥–ª—è –ø—Ä–æ–ø—É—Å–∫–∞ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–≥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–∏–º–≤–æ–ª–∞;</li><li>–ê —Å–∞–º–æ–µ –≥–ª–∞–≤–Ω–æ–µ, –æ–ø–∏—Å–∞–ª–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –º–µ—Ç–æ–¥–æ–≤.</li></ul><p>–ù–∞ —ç—Ç–æ–º –ø–æ–∫–∞ –≤—Å—ë, —è –Ω–∞–¥–µ—é—Å—å –ø–æ—Å—Ç –±—ã–ª –¥–ª—è –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–º –∏ –ø–æ–ª–µ–∑–Ω—ã–º.<br>–ü–æ–¥–ø–∏—Å—ã–≤–∞–π—Ç–µ—Å—å –≤ <a href="https://twitter.com/swiftyfinch">Twitter</a> –∏ –µ—â—ë —É–≤–∏–¥–∏–º—Å—è.</p></div></article></div><footer><a class="home" href="/ru" title="Go Home"><img src="/reactions/home.svg"/></a><p>¬© 2020. All rights reserved.</p><p>Generated using <a href="https://github.com/johnsundell/publish">Publish</a></p></footer></body></html>