<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Swifty Finch"/><link rel="canonical" href="https://swiftyfinch.github.io/en/2021-03-09-rugby-story"/><meta name="twitter:url" content="https://swiftyfinch.github.io/en/2021-03-09-rugby-story"/><meta name="og:url" content="https://swiftyfinch.github.io/en/2021-03-09-rugby-story"/><title>üèà Rugby: Optimise CocoaPods project | Swifty Finch</title><meta name="twitter:title" content="üèà Rugby: Optimise CocoaPods project | Swifty Finch"/><meta name="og:title" content="üèà Rugby: Optimise CocoaPods project | Swifty Finch"/><meta name="description" content="Do you have problems while working on a huge project with a large number of pods in Xcode? Maybe endless indexing? Xcode is always freezing during navigation through a project or while editing it? Slow rebuilding pods targets which have been already built recently?"/><meta name="twitter:description" content="Do you have problems while working on a huge project with a large number of pods in Xcode? Maybe endless indexing? Xcode is always freezing during navigation through a project or while editing it? Slow rebuilding pods targets which have been already built recently?"/><meta name="og:description" content="Do you have problems while working on a huge project with a large number of pods in Xcode? Maybe endless indexing? Xcode is always freezing during navigation through a project or while editing it? Slow rebuilding pods targets which have been already built recently?"/><!--Yandex.Metrika counter--><script type="text/javascript">(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

ym(62530267, "init", {
     clickmap:true,
     trackLinks:true,
     accurateTrackBounce:true
});</script><noscript><div><img src="https://mc.yandex.ru/watch/62530267" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!--/Yandex.Metrika counter--><meta name="yandex-verification" content="57c929529030b8fd"/><meta name="google-site-verification" content="u8NFg-rSs0ZM826TWcHCMQ90RRHRjEk9SpRSbYcB1rQ"/><meta name="twitter:card" content="summary_large_image"/><link rel="stylesheet" href="/styles.css" type="text/css"/><link rel="stylesheet" href="/code.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180"/><link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32"/><link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16"/><link rel="manifest" href="/site.webmanifest"/><meta name="twitter:image" content="https://swiftyfinch.github.io/posts/2021-03-09-rugby-story/preview.png"/><meta name="og:image" content="https://swiftyfinch.github.io/posts/2021-03-09-rugby-story/preview.png"/></head><body class="item-page"><header><div class="wrapper"><div class="facade"><a class="site-name" href="/en"><img class="avatar" src="/site/avatar.png"/>Swifty Finch</a><div class="icons"><div><a class="icon" href="https://github.com/swiftyfinch"><img src="/site/networks/github.png"/></a></div><div><a class="icon" href="https://www.linkedin.com/in/vyacheslav-khorkov-92b65164"><img src="/site/networks/linkedin.png"/></a></div><div><a class="icon" href="https://github.com/swiftyfinch/rugby"><img src="/site/networks/rugby.png"/></a></div><div><a class="icon" href="https://github.com/swiftyfinch/xtree"><img src="/site/networks/xtree.png"/></a></div><div><a class="icon" href="https://t.me/ural_finch"><img src="/site/networks/telegram.png"/></a></div></div><nav><a href="/ru"><div>ru</div></a></nav></div></div></header><div class="wrapper"><article><div class="content"><h1><p>üèà <strong>Rugby:</strong> Optimise CocoaPods project</p></h1><div class="tag-list"><a href="/tags/rugby"><div style="background-color: #e86648">rugby</div></a><a href="/tags/tools"><div style="background-color: #efac32">tools</div></a><a href="/tags/swift"><div style="background-color: #6c99bb">swift</div></a></div><div class="date"><img class="date_icon" src="/reactions/calendar.svg"/><span>09.03.2021</span></div><div class="time_to_read"><img class="time_to_read_icon" src="/reactions/watch.svg"/><span class="time_to_read_text">4 min</span></div><p>Do you have problems while working on a huge project with a large number of pods in <strong>Xcode</strong>? Maybe¬†endless indexing? <strong>Xcode</strong> is always freezing during navigation through a project or while editing it? Slow¬†rebuilding pods targets which have been already built recently?</p><h2 id="prequel"><img class="reaction" src="/reactions/dino.svg" alt="dino.svg" title="dino.svg"> <a href="#prequel">Prequel</a></h2><p>In recent years I have been often annoyed while working on huge projects with <a href="https://github.com/CocoaPods/CocoaPods">CocoaPods</a>. And the final straw was the new project last summer 2020.</p><p>First of all, I decided to measure how much time I spend on building projects during my workday. So¬†my¬†first <strong>macOS</strong> project was born - <a href="https://github.com/swiftyfinch/Buildyosh">Buildyosh</a>.</p><p>As result, I realized that I spend about two hours a day fighting <strong>Xcode</strong>. Add a minimum of two hours for all sorts of communications and you get a four-hour workday at best.</p><p>Finally, I tried to get better hardware at the expense of the company, but I would have to wait for nearly nine months. There must be another way.</p><h2 id="problem"><img class="reaction" src="/reactions/bug.svg" alt="bug.svg" title="bug.svg"> <a href="#problem">The problem</a></h2><p>Before doing some optimization the one needs to figure the problem's nature:</p><ul><li>Slow and unnecessary indexing of remote pods targets, which implementation I rarely try to edit;</li><li>Redundant rebuild time, probably as a result of problems, related to <a href="https://github.com/CocoaPods/CocoaPods">CocoaPods</a> or <strong>Xcode</strong> build system;</li><li>Freezing UI during navigation through a project or editing it;</li><li>Broken or extremely slow autocompletion;</li><li>Noisy laptop turbines, heated aluminum, and infinite spinning pinwheel.</li></ul><h2 id="solution1"><img class="reaction" src="/reactions/castle.svg" alt="castle.svg" title="castle.svg"> <a href="#solution1">Solution #1 - Separate <strong>Xcode</strong> project</a></h2><p>I moved my feature part to a separate dependency and made my own small <strong>Xcode</strong> project. And it solves a lot. But the time for integration is coming. And you have to open an enormous main project again and suffer.</p><p>This solution saves plenty of time but still isn't good enough. Sometimes integration takes most of the time. But anyway, that's something.</p><h2 id="solution2"><img class="reaction" src="/reactions/xcode.svg" alt="xcode.svg" title="xcode.svg"> <a href="#solution2">Solution #2 - Disable <strong>Xcode</strong> indexing for good</a></h2><p>Yeah, I can turn off indexing and lose the ability to use some features. And it solves the majority of problems too.</p><pre><code class="terminal"><div class="line"><span class="red-circle">‚Ä¢</span><span class="yellow-circle">‚Ä¢</span><span class="green-circle">‚Ä¢</span> defaults write com.apple.dt.XCode IDEIndexDisable 1</div></code></pre><p>But I will have to forget about navigating just by clicking on the class. Instead, I will have to use search frequently. Then I need to copy, paste, and so on.</p><p>I have been using that solution all the time until I found the better one.</p><h2 id="solution3">üñ• <a href="#solution3">Solution #3 - Hardware</a></h2><p>I could buy a new <strong>MacBook Pro</strong> or request it from the company. It's the easiest solution if it's available. But I think time will pass, the project will grow, and the hardware will become old and slow again.</p><p>I couldn't get a new <strong>MacBook</strong> from the company in short time. And also, I didn't want to buy it for myself.</p><p>But in February 2021, I finally bought my own <strong>Macbook Air M1</strong>. It is a tremendous boost to my productivity. It's a pity, I didn't have it in summer 2020.</p><h2 id="solution4">üèà <a href="#solution4">Solution #4 - <strong>Rugby</strong></a></h2><p>After a while, I realized how to solve the problem at the software level. I don't need all of the targets in a project, only some of them. Perhaps ten percent or something about that.</p><p>First of all, I was trying to manage this manually. But it was a hard routine action. And I decided to experiments with <strong>Ruby</strong> scripts. I wrote a bunch of scripts and they worked sometimes. In some cases, I did this part manually.</p><p>The main idea was to build all secondary targets and remove them from the <strong>Pods</strong> project. I had plenty of decisions, which weren't well-suited, and I'm noobie in <strong>Ruby</strong> programming. I think on trying to write complex utility with limited language knowledge is not a good idea. Maybe one average file is fine, but not a bunch of them.</p><blockquote><p>Also, I tried <a href="https://github.com/leavez/cocoapods-binary">CocoaPods Binary</a> and similar solutions. But I couldn't run them on the first try and the last update was a year ago. Also, the main problem was that they change <strong>Podfile</strong> and <strong>Podfile.lock</strong> respectively. It did not suit me, since dozens of other people are working on the project and everyone has their own tasks.</p></blockquote><p>At this moment, I have already had some experience and have been ready to rewrite all from scratch using <strong>Swift</strong>. It's my primary language and there are enough useful <strong>SPM</strong> packages for command line utility development.</p><p>When I had the first utility version, I organized an alpha test. Mostly, I was testing on my own. At the end, my secret colleague joined me.</p><p>Then there was a beta test for <strong>~30</strong> users, based on statistics on <strong>GitHub</strong>. I fixed some critical bugs and added new features by useful feedback. It was an important step.</p><p>And finally, I released a stable <a href="https://github.com/swiftyfinch/Rugby/releases/tag/1.0.0">Rugby</a> version with new beta command.</p><h2 id="result"><img class="reaction" src="/reactions/finish.svg" alt="finish.svg" title="finish.svg"> <a href="#result">Conclusion</a></h2><p>As a result, I almost managed with extensive productivity problems and made a profitable home project. Feel free to use it for your needs. Maybe you have some common problems. You can find all the additional information on <a href="https://github.com/swiftyfinch/Rugby">Github</a>.</p><p>It's another story about solving one of my daily problems.<br>I'm not sure, maybe it's not the last one about <strong>Rugby</strong>.</p><p><strong>P.S.</strong> While I was trying to write the utility using <strong>Ruby</strong>, I loved that language even more. Also, I was watching <strong>Ted Lasso</strong> series during this development. So, the name <strong>Rugby</strong> is just a word-play. Like <strong>Ruby</strong>, but with <strong>g</strong>. It's pronounced as <strong>[ÀàruÀêgb…™]</strong>.</p><p><strong>Update:</strong> Now you can read üèà <a href="/en/2023-04-22-rugby-remastered/">Rugby: Remastered</a> story.</p></div></article></div><footer><a class="home" href="/en" title="Go Home"><img src="/reactions/home.svg"/></a><p>¬© 2025. All rights reserved.</p><p>Generated using <a href="https://github.com/johnsundell/publish">Publish</a></p></footer></body></html>