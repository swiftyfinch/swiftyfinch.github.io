<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta property="og:site_name" content="Swifty Finch"/><link rel="canonical" href="https://swiftyfinch.github.io/en/2025-05-10-cocoapods-package"/><meta name="twitter:url" content="https://swiftyfinch.github.io/en/2025-05-10-cocoapods-package"/><meta property="og:url" content="https://swiftyfinch.github.io/en/2025-05-10-cocoapods-package"/><title>CocoaPods Package ðŸŒ¿ | Swifty Finch</title><meta name="twitter:title" content="CocoaPods Package ðŸŒ¿ | Swifty Finch"/><meta property="og:title" content="CocoaPods Package ðŸŒ¿ | Swifty Finch"/><meta name="description" content="Swift is evolving, and SE-0386 introduced the package access modifier for more granular control in Swift packages. While it seems designed for Swift Package Manager (SPM), limiting access within a package, it's not exclusive to it. Even projects using CocoaPods can benefit from it!"/><meta name="twitter:description" content="Swift is evolving, and SE-0386 introduced the package access modifier for more granular control in Swift packages. While it seems designed for Swift Package Manager (SPM), limiting access within a package, it's not exclusive to it. Even projects using CocoaPods can benefit from it!"/><meta property="og:description" content="Swift is evolving, and SE-0386 introduced the package access modifier for more granular control in Swift packages. While it seems designed for Swift Package Manager (SPM), limiting access within a package, it's not exclusive to it. Even projects using CocoaPods can benefit from it!"/><!--Yandex.Metrika counter--><script type="text/javascript">(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

ym(62530267, "init", {
     clickmap:true,
     trackLinks:true,
     accurateTrackBounce:true
});</script><noscript><div><img src="https://mc.yandex.ru/watch/62530267" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!--/Yandex.Metrika counter--><meta name="yandex-verification" content="57c929529030b8fd"/><meta name="google-site-verification" content="u8NFg-rSs0ZM826TWcHCMQ90RRHRjEk9SpRSbYcB1rQ"/><meta name="twitter:card" content="summary_large_image"/><link rel="stylesheet" href="/styles.css" type="text/css"/><link rel="stylesheet" href="/code.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180"/><link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32"/><link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16"/><link rel="manifest" href="/site.webmanifest"/><meta name="twitter:image" content="https://swiftyfinch.github.io/posts/2025-05-10-cocoapods-package/preview.png"/><meta property="og:image" content="https://swiftyfinch.github.io/posts/2025-05-10-cocoapods-package/preview.png"/></head><body class="item-page"><header><div class="wrapper"><div class="facade"><a class="site-name" href="/en"><img class="avatar" src="/site/avatar.png"/>Swifty Finch</a><div class="icons"><div><a class="icon" href="https://github.com/swiftyfinch"><img src="/site/networks/github.png"/></a></div><div><a class="icon" href="https://www.linkedin.com/in/vyacheslav-khorkov-92b65164"><img src="/site/networks/linkedin.png"/></a></div><div><a class="icon" href="https://github.com/swiftyfinch/rugby"><img src="/site/networks/rugby.png"/></a></div><div><a class="icon" href="https://github.com/swiftyfinch/xtree"><img src="/site/networks/xtree.png"/></a></div><div><a class="icon" href="https://t.me/ural_finch"><img src="/site/networks/telegram.png"/></a></div></div><nav><a href="/ru"><div>ru</div></a></nav></div></div></header><div class="wrapper"><article><div class="content"><h1><p><strong>CocoaPods</strong> Package <img class="reaction" src="/reactions/herb.svg" alt="herb.svg" title="herb.svg"></p></h1><div class="tag-list"><a href="/tags/swift"><div style="background-color: #6c99bb">swift</div></a><a href="/tags/tech"><div style="background-color: #7daf9c">tech</div></a><a href="/tags/ios"><div style="background-color: #efac32">ios</div></a></div><div class="date"><img class="date_icon" src="/reactions/calendar.svg"/><span>10.05.2025</span></div><div class="time_to_read"><img class="time_to_read_icon" src="/reactions/watch.svg"/><span class="time_to_read_text">4 min</span></div><p>Swift is evolving, and <a href="https://github.com/swiftlang/swift-evolution/blob/main/proposals/0386-package-access-modifier.md">SE-0386</a> introduced <strong>the package access modifier</strong> for more granular control in Swift packages. While it seems designed for Swift Package Manager (<strong>SPM</strong>), limiting access within a package, it's not exclusive to it. Even projects using <strong>CocoaPods</strong> can benefit from it!</p><img src="/posts/2025-05-10-cocoapods-package/preview.png"/><h2 id="package-name"><img class="reaction" src="/reactions/triangular_flag.png" alt="triangular_flag.png" title="triangular_flag.png"> <a href="#package-name">The <strong>-package-name</strong> Compilation Flag</a></h2><p>If you read the proposal more closely, you'll notice that the <strong>package</strong> modifier is essentially tied to a compilation flag: <strong>-package-name</strong>. SPM automatically passes this flag with the name of the package during the build process. But here's the <strong>exciting part</strong>: this flag can be manually specified, even if you're not using SPM.</p><p>This insight opens up possibilities for using the <strong>package</strong> modifier in non-SPM setups, such as projects managed with <strong>CocoaPods</strong>. By explicitly setting the <strong>-package-name</strong> flag for multiple pods, you can simulate the behavior of a single package.</p><h2 id="usage"><img class="reaction" src="/reactions/rocket.gif" alt="rocket.gif" title="rocket.gif"> <a href="#usage">Using <strong>package</strong> in CocoaPods</a></h2><p>Let's take an example where we have two pods: <strong>Saiga</strong> and <strong>WiseFields</strong>. We want to use the <strong>package</strong> modifier to share functionality between these pods while keeping the rest of the code encapsulated.</p><h3>Defining a Package-Scoped Function</h3><p>In <strong>Saiga</strong>, we define a function using the <strong>package</strong> modifier:</p><pre><code class="swift"><div class="line"><span class="keyword">package func</span> helloWorld() {</div><div class="line">    <span class="call">print</span>(<span class="string">"Hello world!"</span>)</div><div class="line">}</div></code></pre><p>This function is accessible only within the same package, as defined by the <strong>-package-name</strong> flag.</p><h3>Configuring <strong>CocoaPods</strong> Specs</h3><p>To ensure that <strong>Saiga</strong> and <strong>WiseFields</strong> are treated as part of the same package, we need to include the <strong>&#8209;package-name</strong> flag in their <strong>.podspec</strong> files. Here's how it looks:</p><h4><strong>Saiga</strong>.podspec</h4><pre><code class="ruby"><div class="line"><span class="type">Pod</span>::<span class="type">Spec</span>.<span class="property">new</span> <span class="keyword">do</span> |s|</div><div class="line">  s.<span class="property">name</span>     = <span class="string">"Saiga"</span></div><div class="line">  s.<span class="property">version</span>  = '<span class="number">1.0.0</span>'</div><div class="line">  s.<span class="property">summary</span>  = <span class="string">"none"</span></div><div class="line">  s.<span class="property">homepage</span> = <span class="string">"none"</span></div><div class="line">  s.<span class="property">author</span>   = <span class="string">"SwiftyFinch"</span></div><div class="line">  s.<span class="property">source</span>   = { :path =&gt; <span class="string">"*"</span> }</div><div class="line"></div><div class="line">  s.<span class="property">ios</span>.<span class="property">deployment_target</span> = '<span class="number">16.0</span>'</div><div class="line">  s.<span class="property">static_framework</span> = <span class="keyword">true</span></div><div class="line">  s.<span class="property">prefix_header_file</span> = <span class="keyword">false</span></div><div class="line">  s.<span class="property">source_files</span> = <span class="string">"#{s.name}/Sources/**/*.swift"</span></div><div class="line">  s.<span class="property">pod_target_xcconfig</span> = {</div><div class="line">    <span class="string">"OTHER_SWIFT_FLAGS"</span> =&gt; <span class="string">"-package-name Core"</span></div><div class="line">  }</div><div class="line">end</div></code></pre><h4><strong>WiseFields</strong>.podspec</h4><pre><code class="ruby"><div class="line"><span class="type">Pod</span>::<span class="type">Spec</span>.<span class="property">new</span> <span class="keyword">do</span> |s|</div><div class="line">  s.<span class="property">name</span>     = <span class="string">"WiseFields"</span></div><div class="line">  s.<span class="property">version</span>  = '<span class="number">1.0.0</span>'</div><div class="line">  s.<span class="property">summary</span>  = <span class="string">"none"</span></div><div class="line">  s.<span class="property">homepage</span> = <span class="string">"none"</span></div><div class="line">  s.<span class="property">author</span>   = <span class="string">"SwiftyFinch"</span></div><div class="line">  s.<span class="property">source</span>   = { :path =&gt; <span class="string">"*"</span> }</div><div class="line"></div><div class="line">  s.<span class="property">ios</span>.<span class="property">deployment_target</span> = '<span class="number">16.0</span>'</div><div class="line">  s.<span class="property">static_framework</span> = <span class="keyword">true</span></div><div class="line">  s.<span class="property">prefix_header_file</span> = <span class="keyword">false</span></div><div class="line">  s.<span class="property">source_files</span> = <span class="string">"#{s.name}/Sources/**/*.swift"</span></div><div class="line">  s.<span class="property">pod_target_xcconfig</span> = {</div><div class="line">    <span class="string">"OTHER_SWIFT_FLAGS"</span> =&gt; <span class="string">"-package-name Core"</span></div><div class="line">  }</div><div class="line">  s.<span class="property">dependency</span> <span class="string">"Saiga"</span></div><div class="line">end</div></code></pre><p>By setting <strong>-package-name Core</strong> in both podspecs, we ensure that <strong>Saiga</strong> and <strong>WiseFields</strong> belong to the same logical package.</p><h2 id="result"><img class="reaction" src="/reactions/party.png" alt="party.png" title="party.png"> <a href="#result">Accessing the <strong>helloWorld()</strong></a></h2><p>Now that both pods are part of the same package, we can call the <strong>package</strong>-scoped function from <strong>Saiga</strong>:</p><pre><code class="swift"><div class="line"><span class="keyword">import</span> Saiga</div><div class="line"></div><div class="line"><span class="call">helloWorld</span>() <span class="comment">// Output: Hello world!</span></div></code></pre><p>The function <strong>helloWorld</strong> is accessible in <strong>WiseFields</strong> because the <strong>-package-name</strong> flag unifies these modules under the same package name, even though they are managed by CocoaPods.</p><h2 id="why-this-matters"><img class="reaction" src="/reactions/toolbox.svg" alt="toolbox.svg" title="toolbox.svg"> <a href="#why-this-matters">Why This Matters</a></h2><ul><li>The <strong>package</strong> access control modifier is a critical feature for managing <strong>core functionality</strong> across multiple modules.</li><li>It enables developers to encapsulate experimental or unstable APIs within package boundaries, ensuring they are not prematurely exposed.</li><li>This approach minimizes compatibility risks and provides the flexibility to refine functionality until it's ready for broader use.</li></ul><h2 id="conclusion"><img class="reaction" src="/reactions/finish.svg" alt="finish.svg" title="finish.svg"> <a href="#conclusion">Conclusion</a></h2><p>The <strong>package</strong> modifier is a versatile tool that enhances modularity and API management <strong>for both SPM and CocoaPods users</strong>. By enabling <strong>safe API iteration</strong> and reducing exposure risks, it simplifies the development of robust, maintainable code. Swift's continued evolution empowers developers to build better workflows across diverse ecosystems.</p><p>You can explore this in action in <a href="https://github.com/swiftyfinch/CocoaPodsPackage/">the example project</a>.</p></div></article></div><footer><a class="home" href="/en" title="Go Home"><img src="/reactions/home.svg"/></a><p>Â© 2025. All rights reserved.</p><p>Generated using <a href="https://github.com/johnsundell/publish">Publish</a></p></footer></body></html>